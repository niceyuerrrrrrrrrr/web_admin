# ç®¡ç†åå°éƒ¨ç½²æŒ‡å—

## âœ… å·²å®Œæˆçš„å·¥ä½œ

1. **ä»£ç æäº¤** - æ‰€æœ‰ä»£ç å·²æäº¤åˆ°Gitä»“åº“
2. **é¡¹ç›®æ„å»º** - å·²æˆåŠŸæ„å»ºï¼Œç”Ÿæˆdistç›®å½•
3. **ä¿®å¤é”™è¯¯** - ä¿®å¤äº†æ‰€æœ‰TypeScriptç±»å‹é”™è¯¯

## ğŸ“¦ éƒ¨ç½²æ–¹æ³•

### æ–¹æ³•1ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

å¦‚æœæ‚¨å·²é…ç½®SSHå¯†é’¥ï¼š

```bash
cd /Users/niesiyu/Desktop/web-admin
./deploy.sh
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨éƒ¨ç½²

#### æ­¥éª¤1ï¼šæ‰“åŒ…distç›®å½•

```bash
cd /Users/niesiyu/Desktop/web-admin
tar -czf dist.tar.gz dist/
```

#### æ­¥éª¤2ï¼šä¸Šä¼ åˆ°æœåŠ¡å™¨

ä½¿ç”¨æ‚¨å–œæ¬¢çš„å·¥å…·ä¸Šä¼  `dist.tar.gz` åˆ°æœåŠ¡å™¨ï¼š

**ä½¿ç”¨scpï¼ˆéœ€è¦è¾“å…¥å¯†ç ï¼‰ï¼š**
```bash
scp dist.tar.gz root@47.108.135.142:/tmp/
```

**æˆ–ä½¿ç”¨FTP/SFTPå·¥å…·ï¼š**
- FileZilla
- Transmit
- Cyberduck

#### æ­¥éª¤3ï¼šåœ¨æœåŠ¡å™¨ä¸Šè§£å‹å¹¶éƒ¨ç½²

SSHç™»å½•åˆ°æœåŠ¡å™¨ï¼š
```bash
ssh root@47.108.135.142
```

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```bash
cd /tmp
tar -xzf dist.tar.gz
rm -rf /www/wwwroot/admin.hodaruner.cn/*
cp -r dist/* /www/wwwroot/admin.hodaruner.cn/
chown -R www:www /www/wwwroot/admin.hodaruner.cn
rm -rf dist dist.tar.gz
```

#### æ­¥éª¤4ï¼šéªŒè¯éƒ¨ç½²

è®¿é—®ï¼šhttps://admin.hodaruner.cn

æ£€æŸ¥ï¼š
- âœ… é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½
- âœ… ç™»å½•é¡µé¢æ˜¯å¦æ˜¾ç¤º"ä¼ä¸šå¾®ä¿¡ç™»å½•"æŒ‰é’®
- âœ… æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### æ–¹æ³•3ï¼šä½¿ç”¨å®å¡”é¢æ¿ï¼ˆæœ€ç®€å•ï¼‰

å¦‚æœæœåŠ¡å™¨å®‰è£…äº†å®å¡”é¢æ¿ï¼š

1. ç™»å½•å®å¡”é¢æ¿
2. è¿›å…¥"æ–‡ä»¶"ç®¡ç†
3. å¯¼èˆªåˆ° `/www/wwwroot/admin.hodaruner.cn/`
4. åˆ é™¤æ‰€æœ‰æ—§æ–‡ä»¶
5. ä¸Šä¼ æœ¬åœ°çš„ `dist` ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶
6. è®¾ç½®æƒé™ä¸º `www:www`

## ğŸ“ éƒ¨ç½²æ–‡ä»¶æ¸…å•

distç›®å½•åŒ…å«ï¼š
- `index.html` - ä¸»é¡µé¢
- `assets/` - JSå’ŒCSSæ–‡ä»¶
- `logo.png` - Logoå›¾ç‰‡
- `vite.svg` - Viteå›¾æ ‡
- `WW_verify_lCJ130TXkljch2Jz.txt` - ä¼ä¸šå¾®ä¿¡åŸŸåéªŒè¯æ–‡ä»¶

## ğŸ”§ æœåŠ¡å™¨é…ç½®

### Nginxé…ç½®

ç¡®ä¿Nginxé…ç½®æ­£ç¡®ï¼š

```nginx
server {
    listen 80;
    listen 443 ssl http2;
    server_name admin.hodaruner.cn;
    
    root /www/wwwroot/admin.hodaruner.cn;
    index index.html;
    
    # SSLè¯ä¹¦é…ç½®
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    # SPAè·¯ç”±æ”¯æŒ
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # ä¼ä¸šå¾®ä¿¡éªŒè¯æ–‡ä»¶
    location ~* ^/WW_verify_.+\.txt$ {
        add_header Content-Type text/plain;
    }
}
```

é‡å¯Nginxï¼š
```bash
nginx -t
systemctl restart nginx
```

## ğŸ§ª æµ‹è¯•æ¸…å•

éƒ¨ç½²åè¯·æµ‹è¯•ï¼š

- [ ] è®¿é—® https://admin.hodaruner.cn
- [ ] ç™»å½•é¡µé¢æ˜¾ç¤ºæ­£å¸¸
- [ ] "ä¼ä¸šå¾®ä¿¡ç™»å½•"æŒ‰é’®æ˜¾ç¤ºæ­£å¸¸
- [ ] ç‚¹å‡»"ä¼ä¸šå¾®ä¿¡ç™»å½•"èƒ½è·³è½¬åˆ°æˆæƒé¡µé¢
- [ ] ä¼ä¸šå¾®ä¿¡æ‰«ç åèƒ½æ­£ç¡®å›è°ƒ
- [ ] ç™»å½•æˆåŠŸåèƒ½è¿›å…¥ç®¡ç†åå°
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸ä½¿ç”¨

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šé¡µé¢æ˜¾ç¤º404

**åŸå› **ï¼šæ–‡ä»¶æœªæ­£ç¡®ä¸Šä¼ æˆ–Nginxé…ç½®é”™è¯¯

**è§£å†³**ï¼š
1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`ls -la /www/wwwroot/admin.hodaruner.cn/`
2. æ£€æŸ¥Nginxé…ç½®ï¼š`nginx -t`
3. æŸ¥çœ‹Nginxé”™è¯¯æ—¥å¿—ï¼š`tail -f /var/log/nginx/error.log`

### é—®é¢˜2ï¼šé¡µé¢ç©ºç™½

**åŸå› **ï¼šJSæ–‡ä»¶åŠ è½½å¤±è´¥æˆ–è·¯å¾„é”™è¯¯

**è§£å†³**ï¼š
1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯
2. æ£€æŸ¥Networkæ ‡ç­¾ï¼Œçœ‹å“ªäº›èµ„æºåŠ è½½å¤±è´¥
3. ç¡®ä¿æ‰€æœ‰æ–‡ä»¶æƒé™æ­£ç¡®ï¼š`chown -R www:www /www/wwwroot/admin.hodaruner.cn`

### é—®é¢˜3ï¼šä¼ä¸šå¾®ä¿¡ç™»å½•å¤±è´¥

**åŸå› **ï¼šå›è°ƒåŸŸåæœªé…ç½®æˆ–éªŒè¯æ–‡ä»¶ä¸å­˜åœ¨

**è§£å†³**ï¼š
1. ç¡®è®¤éªŒè¯æ–‡ä»¶å­˜åœ¨ï¼š`ls /www/wwwroot/admin.hodaruner.cn/WW_verify_*.txt`
2. è®¿é—®éªŒè¯æ–‡ä»¶ï¼š`https://admin.hodaruner.cn/WW_verify_lCJ130TXkljch2Jz.txt`
3. æ£€æŸ¥ä¼ä¸šå¾®ä¿¡åå°çš„å¯ä¿¡åŸŸåé…ç½®

## ğŸ“ åç»­ç»´æŠ¤

### æ›´æ–°éƒ¨ç½²

å½“ä»£ç æœ‰æ›´æ–°æ—¶ï¼š

```bash
cd /Users/niesiyu/Desktop/web-admin
git pull
npm install  # å¦‚æœæœ‰ä¾èµ–æ›´æ–°
npm run build
./deploy.sh  # æˆ–æ‰‹åŠ¨éƒ¨ç½²
```

### å›æ»š

å¦‚æœæ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œå¯ä»¥å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼š

```bash
git log --oneline  # æŸ¥çœ‹æäº¤å†å²
git checkout <commit-hash>  # åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬
npm run build
./deploy.sh
```

## ğŸ‰ éƒ¨ç½²å®Œæˆ

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨çš„ç®¡ç†åå°å°†æ”¯æŒï¼š

âœ… æ‰‹æœºå·å¯†ç ç™»å½•
âœ… ä¼ä¸šå¾®ä¿¡æ‰«ç ç™»å½•
âœ… æ‰€æœ‰åŸæœ‰åŠŸèƒ½

è®¿é—®åœ°å€ï¼š**https://admin.hodaruner.cn**

---

**éœ€è¦å¸®åŠ©ï¼Ÿ**

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æœåŠ¡å™¨SSHè¿æ¥æ˜¯å¦æ­£å¸¸
2. Nginxæ˜¯å¦æ­£åœ¨è¿è¡Œ
3. æ–‡ä»¶æƒé™æ˜¯å¦æ­£ç¡®
4. SSLè¯ä¹¦æ˜¯å¦æœ‰æ•ˆ
