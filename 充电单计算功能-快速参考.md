# 充电单计算功能 - 快速参考

## 📍 功能位置
**路径：** 运营管理 > 充电管理 > 充电单列表  
**URL：** `/charging/list`

---

## 🎯 核心功能

### 计算按钮
- **位置：** 每条充电单的操作列
- **图标：** 🧮 计算器
- **文字：** "计算金额"

### 三步流程
```
1️⃣ 确认信息 → 2️⃣ 执行计算 → 3️⃣ 应用结果
```

---

## ✅ 使用前提

| 必需项 | 说明 |
|--------|------|
| ✅ 充电站 | 必须有充电站名称 |
| ✅ 充电时间 | 必须有开始充电时间 |
| ✅ 充电电量 | 必须大于0 kWh |
| ✅ 电价规则 | 充电站需配置时段电价 |

---

## 🚀 快速操作

### 单条计算
```
1. 找到充电单
2. 点击"计算金额"
3. 确认信息 → 点击"确定"
4. 查看结果 → 点击"应用计算结果"
5. 二次确认 → 完成
```

### 查看结果
- **计算金额：** 🟡 金色显示
- **计算单价：** 🟢 绿色显示
- **金额差异：** 
  - 🔴 正差异（识别 > 计算）
  - 🟢 负差异（识别 < 计算）

---

## ⚠️ 常见问题

### Q1: 点击按钮提示"缺少充电站信息"？
**A:** 该充电单的充电站字段为空，需要先编辑补充

### Q2: 点击按钮提示"缺少充电时间信息"？
**A:** 该充电单的开始充电时间为空，需要先编辑补充

### Q3: 点击按钮提示"缺少有效的电量信息"？
**A:** 该充电单的电量为0或空，需要先编辑补充

### Q4: 计算失败提示"未找到电价规则"？
**A:** 该充电站未配置电价规则，需前往"充电站管理"配置

### Q5: 应用结果后，识别金额会改变吗？
**A:** 不会！只更新"计算金额"和"计算单价"字段

### Q6: 可以重复计算吗？
**A:** 可以！系统会显示原计算金额供对比

---

## 🎨 界面说明

### 对话框1：确认信息
```
┌─────────────────────────────┐
│ 计算充电费用                │
├─────────────────────────────┤
│ 充电站：国家电网充电站      │
│ 充电时间：2026-01-26 14:30  │
│ 充电电量：50.5 kWh          │
│ 识别金额：￥65.00           │
├─────────────────────────────┤
│ [取消]  [确定]              │
└─────────────────────────────┘
```

### 对话框2：计算结果
```
┌─────────────────────────────┐
│ 计算结果                    │
├─────────────────────────────┤
│ 计算金额：￥62.50           │
│ 计算单价：￥1.2376/kWh      │
│ 金额差异：+￥2.50           │
├─────────────────────────────┤
│ [取消]  [应用计算结果]      │
└─────────────────────────────┘
```

---

## 📊 数据字段

| 字段 | 说明 | 来源 |
|------|------|------|
| 识别金额 | OCR识别的金额 | 票据识别 |
| 计算金额 | 系统计算的金额 | 时段电价计算 |
| 计算单价 | 加权平均单价 | 时段电价计算 |
| 金额差异 | 识别金额 - 计算金额 | 自动计算 |

---

## 🔧 相关功能

### 充电站管理
- **路径：** 运营管理 > 充电管理 > 充电站管理
- **功能：** 配置时段电价规则
- **说明：** 计算依赖此处配置的电价

### 充电单编辑
- **位置：** 操作列 > 编辑
- **功能：** 补充或修改充电单信息
- **说明：** 可手动修改计算金额和单价

### 充电单查看
- **位置：** 操作列 > 查看
- **功能：** 查看充电单详情
- **说明：** 可查看所有字段包括计算结果

---

## 💡 使用技巧

### 技巧1：批量验证
1. 导出充电单数据
2. 筛选出金额差异较大的记录
3. 逐条重新计算验证

### 技巧2：数据对比
1. 记录原计算金额
2. 重新计算
3. 对比新旧结果
4. 分析差异原因

### 技巧3：快速修正
1. 发现识别错误
2. 使用计算功能获取正确金额
3. 应用计算结果
4. 完成数据修正

---

## 📱 快捷键

| 操作 | 快捷键 |
|------|--------|
| 确认对话框 | Enter |
| 取消对话框 | Esc |

---

## 🔗 相关文档

1. **功能说明：** `充电单计算功能说明.md`
2. **测试指南：** `充电单计算功能-测试指南.md`
3. **部署清单：** `充电单计算功能-部署清单.md`
4. **完成总结：** `充电单计算功能-完成总结.md`

---

## 📞 需要帮助？

### 功能问题
- 查看功能说明文档
- 查看测试指南中的常见问题

### 技术问题
- 查看部署清单中的故障排查
- 联系技术支持

### 业务问题
- 查看使用技巧
- 联系业务支持

---

## 🎯 记住这些

✅ **DO（推荐）**
- 计算前检查数据完整性
- 查看计算结果后再应用
- 对比金额差异分析原因
- 保留原识别金额作为参考

❌ **DON'T（避免）**
- 不要盲目应用计算结果
- 不要忽略金额差异过大的情况
- 不要在数据不完整时强行计算
- 不要担心原识别金额被修改（不会）

---

*快速参考卡片 v1.0 | 2026-01-26*

