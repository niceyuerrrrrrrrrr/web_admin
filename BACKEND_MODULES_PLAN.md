# 后台管理端功能模块规划

基于小程序功能与后端 API 的完整功能模块规划

## 📋 一、核心业务模块（优先级：高）

### 1. **审批管理中心** ✅ (已有基础)
- **待审批列表**：统一展示所有类型的待审批事项（报销、采购、请假、物品领用、故障上报）
- **审批处理**：支持通过/驳回，填写审批意见
- **审批历史**：查看已处理的审批记录
- **审批统计**：按类型、状态、时间维度统计审批数据
- **审批流程配置**：可视化配置各类审批的流程节点、审批人角色
- **API 对接**：`/approval/pending`, `/approval/approve`, `/approval/workflows`

### 2. **票据管理中心**
- **装料单管理**：查看、编辑、审核装料单，支持图片预览
- **卸货单管理**：卸货单列表、详情、统计
- **充电单管理**：充电记录查询、金额统计
- **水票管理**：水票记录管理
- **票据统计**：按时间、司机、车辆统计票据数据
- **批量导出**：支持 Excel/CSV 导出
- **API 对接**：`/receipts/loading`, `/receipts/unloading`, `/receipts/charging`

### 3. **考勤管理系统**
- **打卡记录查询**：按日期、员工、状态筛选打卡记录
- **异常打卡告警**：位置异常、时间异常、缺勤提醒
- **补卡审批**：处理员工的补卡申请
- **考勤统计**：出勤率、工作时长、迟到早退统计
- **电子围栏管理**：配置打卡地点围栏（GPS 范围）
- **外勤打卡监控**：实时查看外勤打卡情况
- **API 对接**：`/attendance/*`, `/attendance/fences`, `/attendance/alerts`

### 4. **车辆资产管理**
- **车辆列表**：车牌、司机绑定、车辆状态
- **车辆证件管理**：行驶证、保险等证件上传与到期提醒
- **车辆轨迹查询**：查看车辆历史行驶轨迹
- **车辆绑定历史**：查看车牌变更记录
- **车辆统计**：运行车辆数、车辆利用率
- **API 对接**：`/vehicles/plates`, `/vehicles/bind_plate`

---

## 📊 二、数据统计与分析（优先级：高）

### 5. **数据统计大屏** ✅ (已有基础)
- **实时数据看板**：今日审批、打卡、票据等核心指标
- **审批统计图表**：按类型、状态、时间趋势分析
- **票据统计图表**：装料/卸货量、金额趋势
- **考勤统计图表**：出勤率、工作时长趋势
- **能耗统计**：充电量、碳排放统计
- **料厂拉货统计**：按料厂、材料类型统计
- **司机运输统计**：按司机、车辆统计运输量
- **API 对接**：`/statistics/*` 所有统计接口

---

## 👥 三、组织与权限管理（优先级：中）

### 6. **用户与角色管理** ✅ (已有基础)
- **用户列表**：查看所有用户，支持搜索、筛选
- **用户详情**：查看用户基本信息、角色、权限
- **角色管理**：总经理、财务、统计、车队长、司机等角色配置
- **权限分配**：为角色分配功能权限、数据权限
- **用户状态管理**：启用/禁用账号、重置密码
- **批量操作**：批量导入用户、批量分配角色
- **API 对接**：`/users/*`, `/roles/*`

### 7. **公司管理**
- **公司列表**：多公司/多租户管理
- **公司信息配置**：公司名称、地址、联系方式
- **数据隔离**：确保各公司数据独立
- **API 对接**：`/companies/*`

---

## 💰 四、财务管理模块（优先级：中）

### 8. **报销管理**
- **报销单列表**：查看所有报销申请
- **报销审核**：财务审核报销单
- **报销统计**：按类别、时间、员工统计报销金额
- **报销规则配置**：设置报销限额、审批规则
- **API 对接**：`/reimbursement/*`

### 9. **采购管理**
- **采购申请列表**：查看采购申请
- **采购审批**：审批采购申请
- **采购统计**：采购金额、类别统计
- **供应商管理**：维护供应商信息
- **API 对接**：`/purchase/*`

### 10. **薪资管理**
- **薪资列表**：查看员工薪资记录
- **薪资上传**：批量上传薪资表
- **薪资统计**：按部门、时间统计薪资支出
- **API 对接**：`/salary/*`

---

## 📦 五、库存与物料管理（优先级：中）

### 11. **库存管理**
- **库存列表**：查看所有仓库的库存情况
- **库存预警**：低库存、超库存提醒
- **出入库记录**：查看所有出入库操作记录
- **库存统计**：按仓库、物料统计库存
- **API 对接**：`/inventory/*`

### 12. **仓库管理**
- **仓库列表**：管理多个仓库
- **仓库信息**：仓库地址、管理员配置
- **API 对接**：`/inventory/warehouses`

### 13. **物品领用管理**
- **领用申请列表**：查看物品领用申请
- **领用审批**：审批物品领用
- **领用统计**：按物品、员工统计领用情况
- **API 对接**：`/material/*`

### 14. **材料定价管理**
- **材料价格配置**：设置不同材料的价格
- **价格历史**：查看价格变动历史
- **API 对接**：`/material_pricing/*`

---

## 🚛 六、运输与运营管理（优先级：中）

### 15. **运输任务管理**
- **任务列表**：查看所有运输任务
- **任务分配**：分配任务给司机
- **任务跟踪**：实时跟踪任务状态
- **任务统计**：任务完成率、运输量统计
- **API 对接**：`/receipts/transport_tasks`

### 16. **充电站管理**
- **充电站列表**：管理充电站信息
- **充电价格配置**：设置不同时段的充电价格
- **充电统计**：充电量、费用统计
- **API 对接**：`/charging_pricing/*`

---

## 👨‍💼 七、人事管理模块（优先级：中）

### 17. **人事管理**
- **员工档案**：查看所有员工信息
- **入职管理**：处理入职申请、生成入职表单 PDF
- **离职管理**：处理离职申请、生成离职表单 PDF
- **员工状态管理**：试用期、正式员工、离职等状态
- **电子签名管理**：管理员工电子签名
- **API 对接**：`/hr/*`

---

## 📝 八、其他业务模块（优先级：低）

### 18. **请假管理**
- **请假申请列表**：查看请假申请
- **请假审批**：审批请假申请
- **请假统计**：按类型、员工统计请假情况
- **API 对接**：`/leave/*`

### 19. **故障上报管理**
- **故障列表**：查看故障上报记录
- **故障处理**：分配处理人、更新处理状态
- **故障统计**：故障类型、处理时效统计
- **API 对接**：`/report/*`

### 20. **通知公告管理**
- **公告列表**：发布、编辑、删除公告
- **公告推送**：推送给指定用户或角色
- **公告统计**：查看率、阅读统计
- **API 对接**：`/notice/*`

### 21. **文档管理**
- **文档列表**：管理各类文档（车辆证件、员工证件等）
- **文档分类**：按类型分类管理
- **文档审核**：审核上传的文档
- **API 对接**：`/documents/*`

### 22. **导航管理**
- **导航记录**：查看司机导航记录
- **常用路线**：管理常用运输路线
- **API 对接**：`/navigation/*`

---

## ⚙️ 九、系统配置（优先级：中）

### 23. **系统配置** ✅ (已有基础)
- **基础配置**：系统名称、Logo、默认公司
- **审批配置**：审批提醒方式、自动提醒规则
- **考勤配置**：打卡时间、围栏范围
- **通知配置**：短信、邮件、企业微信通知配置

---

## 📈 十、数据分析与报表（优先级：低）

### 24. **自定义报表**
- **报表设计器**：可视化设计报表
- **报表生成**：按条件生成报表
- **报表导出**：支持 Excel、PDF 导出
- **定时报表**：定时生成并发送报表

### 25. **数据导出中心**
- **批量导出**：支持多模块数据批量导出
- **导出历史**：查看导出记录
- **导出模板**：自定义导出模板

---

## 🎯 实施优先级建议

### 第一阶段（核心功能，1-2周）
1. ✅ 审批管理中心（完善）
2. ✅ 数据统计大屏（完善）
3. 票据管理中心
4. 考勤管理系统
5. 车辆资产管理

### 第二阶段（重要功能，2-3周）
6. 用户与角色管理（完善）
7. 财务管理模块（报销、采购）
8. 库存管理
9. 系统配置（完善）

### 第三阶段（扩展功能，按需开发）
10. 人事管理
11. 运输任务管理
12. 其他业务模块

---

## 🔌 API 对接清单

### 已对接（基础框架）
- ✅ 路由系统
- ✅ 认证系统（JWT）
- ✅ 状态管理（Zustand）
- ✅ HTTP 客户端（Axios）

### 待对接 API 模块
- `/approval/*` - 审批管理
- `/receipts/*` - 票据管理
- `/attendance/*` - 考勤管理
- `/vehicles/*` - 车辆管理
- `/statistics/*` - 数据统计
- `/users/*` - 用户管理
- `/roles/*` - 角色管理
- `/companies/*` - 公司管理
- `/reimbursement/*` - 报销管理
- `/purchase/*` - 采购管理
- `/inventory/*` - 库存管理
- `/material/*` - 物品领用
- `/hr/*` - 人事管理
- `/leave/*` - 请假管理
- `/report/*` - 故障上报
- `/notice/*` - 通知公告
- `/salary/*` - 薪资管理
- `/charging_pricing/*` - 充电定价
- `/material_pricing/*` - 材料定价

---

## 📝 技术实现建议

### 1. API Service 层
在 `src/api/services/` 下创建各模块的 service：
- `approvalService.ts` - 审批相关 API
- `receiptService.ts` - 票据相关 API
- `attendanceService.ts` - 考勤相关 API
- `vehicleService.ts` - 车辆相关 API
- `statisticsService.ts` - 统计相关 API
- ... 等等

### 2. 通用组件
- `DataTable` - 统一的数据表格组件（支持筛选、排序、分页）
- `FilterBar` - 统一的筛选栏组件
- `StatusTag` - 状态标签组件
- `ActionButtons` - 操作按钮组组件
- `ExportButton` - 导出按钮组件

### 3. 权限控制
- 路由级权限：根据角色控制页面访问
- 按钮级权限：根据权限控制按钮显示
- 数据权限：根据公司 ID 过滤数据

### 4. 数据可视化
- 使用 ECharts 或 AntV Charts 做图表
- 统计大屏使用大屏组件库

---

## 🎨 UI/UX 设计原则

1. **统一风格**：保持与现有设计风格一致
2. **响应式设计**：适配不同屏幕尺寸
3. **操作便捷**：常用操作一键完成
4. **数据清晰**：重要数据突出显示
5. **反馈及时**：操作后及时反馈结果

